// minimize using: ../../UglifyJS-1.3.5/bin/uglifyjs maglight.js > ../maglight_min.js 
var maglight=function(){function e(e){return this._init(e),this}return e.prototype._init=function(e){function n(){var e=0,t=0;return typeof window.pageYOffset=="number"?(t=window.pageYOffset,e=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(t=document.body.scrollTop,e=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft),[e,t]}function r(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e){if(!t.container.enablezoom)return;var n=e||window.event;n.preventDefault?n.preventDefault():n.returnValue=!1,t.container.magnifier.style.display="block"}function s(e){if(!t.container.enablezoom)return;if(typeof t.container.mw=="undefined")return;t.container.magnifier.style.display="block";var r=e||window.event;r.preventDefault?r.preventDefault():r.returnValue=!1;var i=r.pageX,s=r.pageY;r.targetTouches&&r.targetTouches[0]&&(i=r.targetTouches[0].pageX,s=r.targetTouches[0].pageY),i==undefined&&(i=r.clientX+document.documentElement.scrollLeft,s=r.clientY+document.documentElement.scrollTop);var o=curtop=0,u=t.container.simg,a=!1;if(u.offsetParent)do{if(u==document.body)break;u.style&&u.style.position&&u.style.position=="fixed"&&(a=!0),o+=u.offsetLeft,curtop+=u.offsetTop,curtop-=u.scrollTop||0,o-=u.scrollLeft||0}while(u=u.offsetParent);i-=o,s-=curtop;if(a){var f=n();i-=f[0],s-=f[1]}if(i>parseInt(t.container.offsetWidth)||i<0){t.container.magnifier.style.display="none";return}if(s>parseInt(t.container.offsetHeight)||s<0){t.container.magnifier.style.display="none";return}t.container.magnifier.style.left=i-100+"px",t.container.magnifier.style.top=s-100+"px";var l=-1*(i/t.container.offsetWidth*t.container.mw-100),c=-1*(s/t.container.offsetHeight*t.container.mh-100);t.container.magnifier.style.backgroundPosition=l+"px "+c+"px"}var t=this,o={element:null,magsrc:"",centre:!1,shape:"circle",enable:!0,imgviewer:""};if(e)for(var u in e)typeof o[u]!="undefined"&&(o[u]=e[u]);var a=document.createElement("div");a.style.position="relative",a.style.padding=0,o.centre?(a.style.marginLeft="auto",a.style.marginRight="auto"):(a.style.marginLeft=0,a.style.marginRight=0),a.style.marginTop=0,a.style.marginBottom=0,a.style.minWidth="200px",a.style.overflow="hidden",o.element.parentNode.insertBefore(a,o.element),a.appendChild(o.element);var f=a.getElementsByTagName("img")[0];a.simg=f;var l=document.createElement("img");l.src=o.magsrc,l.wrapper=a,l.onload=function(){this.wrapper.mw=this.width||this.naturalWidth,this.wrapper.mh=this.height||this.naturalHeight;if(this.wrapper.mw==NaN||this.wrapper.mw==undefined){var e=document.createElement("img");e.src=l.src,this.wrapper.mw=e.width,this.wrapper.mh=e.height}};var c=document.createElement("div");return o.shape=="circle"&&(c.style.borderRadius="100px"),c.style.position="absolute",c.style.width="200px",c.style.height="200px",c.style.top="0px",c.style.left="0px",c.style.backgroundImage="url("+o.magsrc+")",c.style.backgroundPosition="0 0",c.style.backgroundRepeat="no-repeat",c.style.border="1px solid #aaa",c.style.display="none",c.style.margin=0,c.style.padding=0,a.enablezoom=o.enable,a.appendChild(c),a.magnifier=c,a.onmouseout=function(e){this.magnifier.style.display="none"},a.onmouseover=function(e){if(!this.enablezoom)return;this.magnifier.style.display="block"},this.container=a,r(this.container,"mousemove",function(e){s(e)}),r(this.container,"touchmove",function(e){s(e)}),r(this.container,"touchstart",function(e){s(e)}),o.imgviewer&&o.imgviewer!=""?(this.container.fullview=new maglightFV({image:l}),o.imgviewer=="onclick"&&(this.container.onclick=function(e){var t=e||window.event;t.preventDefault?t.preventDefault():t.returnValue=!1;if(typeof this.mw=="undefined")return;if(typeof this.mh=="undefined")return;return this.fullview.show(!0),!1})):(a.appendChild(l),l.style.display="none"),a},e.prototype.enable=function(e){this.container.enablezoom=e,e||(this.container.magnifier.style.display="none")},e.prototype.isEnabled=function(){return this.container.enablezoom},e.prototype.showFullView=function(e){if(!this.container.fullview)return;this.container.fullview.show(e)},e}(),maglightFV=function(){function e(e){return this._init(e),this}return e.prototype._init=function(e){function r(){var e=0;return self.innerHeight?e=self.innerWidth:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientWidth:document.body&&(e=document.body.clientWidth),e}function i(){var e=0;return self.innerHeight?e=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),e}function s(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function o(){n&&setTimeout(function(){f(),o()},70)}function u(){n&&setTimeout(function(){a(),u()},70)}function a(){t.fullview.img.style.width=parseFloat(t.fullview.img.style.width)-30+"px",parseFloat(t.fullview.img.style.width)>t.fullview.offsetWidth&&(t.fullview.img.style.left=-1*(parseFloat(t.fullview.img.style.width)-t.fullview.offsetWidth)/2+"px"),t.fullview.img.style.top=-1*(parseFloat(t.fullview.img.offsetHeight)-t.fullview.offsetHeight)/2+"px"}function f(){t.fullview.img.style.width=parseFloat(t.fullview.img.style.width)+30+"px",parseFloat(t.fullview.img.style.width)>t.fullview.offsetWidth&&(t.fullview.img.style.left=-1*(parseFloat(t.fullview.img.style.width)-t.fullview.offsetWidth)/2+"px"),t.fullview.img.style.top=-1*(parseFloat(t.fullview.img.offsetHeight)-t.fullview.offsetHeight)/2+"px"}function l(e){var t=e||window.event;t.preventDefault?t.preventDefault():t.returnValue=!1,t.scale||(t.detail?t.detail<0?f():a():t.wheelDelta&&(t.wheelDelta<0?f():a()))}function c(e){t.fullview.dragMove=!0,h(e)}function h(e){if(!t.fullview.dragMove){t.fullview.dragMove=!1,t.fullview.sx=0,t.fullview.sy=0;return}var n=e||window.event;n.preventDefault?n.preventDefault():n.returnValue=!1;var r=n.pageX,i=n.pageY;n.targetTouches&&n.targetTouches[0]&&(r=n.targetTouches[0].pageX,i=n.targetTouches[0].pageY),r==undefined&&(r=n.clientX,i=n.clientY);if(!t.fullview.sx){t.fullview.sx=r,t.fullview.sy=i;return}t.fullview.imgwrap.style.left=parseFloat(t.fullview.imgwrap.style.left)-(t.fullview.sx-r)+"px",t.fullview.imgwrap.style.top=parseFloat(t.fullview.imgwrap.style.top)-(t.fullview.sy-i)+"px",t.fullview.imgwrap.style.overflow="visible",t.fullview.sx=r,t.fullview.sy=i}function p(e){t.fullview.dragMove=!1}var t=this,n=!1,d={image:null};if(e)for(var v in e)typeof d[v]!="undefined"&&(d[v]=e[v]);var m=r(),g=i(),y=document.createElement("div");y.style.position="fixed",y.style.zIndex="999",y.style.width="100%",y.style.height="100%",y.style.top="0px",y.style.left="0px",y.style.textAlign="center",y.style.margin=0,y.style.padding=0,y.style.overflow="hidden",y.style.backgroundColor="#000",document.body.appendChild(y);var b=document.createElement("div");b.style.position="absolute",b.style.zIndex="1100",b.style.top="20px",b.style.right="10px",b.style.width="30px",b.style.padding="3px",b.style.textAlign="center",b.style.backgroundColor="#000",b.style.cursor="pointer",b.style.borderRadius="4px";var w=document.createElement("img");w.src="//publcif.iucr.org/widgets/images/close_24l.png",w.style.cursor="pointer",w.style.marginTop="5px",w.onclick=function(){document.body.style.overflow="auto",this.parentNode.parentNode.style.display="none"},b.appendChild(w);var E=document.createElement("img");E.src="//publcif.iucr.org/widgets/images/zoom_in_24l.png",E.style.cursor="pointer",E.style.marginTop="10px",E.style.paddingLeft="2px",E.onmousedown=E.ontouchstart=function(e){var t=e||window.event;t.preventDefault?t.preventDefault():t.returnValue=!1,n=!0,o()},E.onmouseup=E.ontouchend=function(){n=!1},b.appendChild(E);var S=document.createElement("img");S.src="//publcif.iucr.org/widgets/images/zoom_out_24l.png",S.style.cursor="pointer",S.style.marginTop="5px",S.style.marginBottom="5px",S.style.paddingLeft="2px",S.onmousedown=S.ontouchstart=function(e){var t=e||window.event;t.preventDefault?t.preventDefault():t.returnValue=!1,n=!0,u()},S.onmouseup=S.ontouchend=function(){n=!1},b.appendChild(S),y.appendChild(b);var x=document.createElement("div");x.style.position="relative",x.style.width="100%",x.style.height="100%",x.style.top="0px",x.style.left="0px",x.style.cursor="url(//publcif.iucr.org/widgets/images/mousecursor_32l.png),url(//publcif.iucr.org/widgets/images/mousecursor_32l.cur),move",x.style.margin=0,x.style.padding=0,y.appendChild(x);var T=document.createElement("img");return T.src=d.image.src,T.onload=function(){var e=this.width||this.naturalWidth,t=this.height||this.naturalHeight;if(e==NaN||e==undefined){var n=document.createElement("img");n.src=T.src,e=n.width,t=n.height}var s=r(),o=i(),u=s/e,a=u*e,f=u*t;f>o&&(a=o/t*e),this.style.width=a+"px",this.style.height="auto",this.mw=e,this.mh=t},x.appendChild(T),T.style.position="relative",T.style.top="0px",T.style.left="0px",T.style.cursor="url(//publcif.iucr.org/widgets/images/mousecursor_32l.png),url(//publcif.iucr.org/widgets/images/mousecursor_32l.cur),move",y.img=T,y.imgwrap=x,y.style.display="none",y.show=function(e){if(e){var t=r(),n=i(),s=this.img;if(!s.mw)return;var o=t/s.mw,u=o*s.mw,a=o*s.mh;a>n&&(u=n/s.mh*s.mw),s.style.width=u+"px",s.style.height="auto",s.style.left="0px",s.style.top="0px",this.imgwrap.style.left="0px",this.imgwrap.style.top="0px",this.style.display="block",document.body.style.overflow="hidden"}else this.style.display="none",document.body.style.overflow="auto"},s(y,"mousemove",function(e){h(e)}),s(y,"mousedown",function(e){c(e)}),s(y,"mouseup",function(e){p(e)}),s(y,"DOMMouseScroll",function(e){l(e)}),s(y,"mousewheel",function(e){l(e)}),this.fullview=y,y},e.prototype.show=function(e){if(!this.fullview)return;this.fullview.show(e)},e}();